[gcode_macro M207]
description: Set firmware retraction settings (Marlin)
gcode:
    # M207 is not typically used in Klipper; retraction settings should be managed
    # through the slicer software. This macro is provided to prevent errors
    # from G-code generated for Marlin firmware.
    {% if 'S' in params %}
        {% set retraction_length = params.S|float %}
        {action_respond_info("Retraction length set to " ~ retraction_length ~ " mm (handled by slicer in Klipper).")}
    {% endif %}
    {% if 'F' in params %}
        {% set retraction_speed = params.F|float %}
        {action_respond_info("Retraction speed set to " ~ retraction_speed ~ " mm/min (handled by slicer in Klipper).")}
    {% endif %}
    {% if 'Z' in params %}
        {% set z_hop = params.Z|float %}
        {action_respond_info("Z-hop during retraction set to " ~ z_hop ~ " mm (handled by slicer in Klipper).")}
    {% endif %}
    {% if 'R' in params %}
        {% set retraction_recovery = params.R|float %}
        {action_respond_info("Retraction recovery set to " ~ retraction_recovery ~ " mm (handled by slicer in Klipper).")}
    {% endif %}
    {% if 'W' in params %}
        {% set firmware_wipe = params.W|float %}
        {action_respond_info("Firmware wipe set to " ~ firmware_wipe ~ " mm (handled by slicer in Klipper).")}
    {% endif %}
    {% if 'S' not in params and 'F' not in params and 'Z' not in params and 'R' not in params and 'W' not in params %}
        {action_respond_info("M207 command received without relevant parameters. No retraction settings applied.")}
    {% endif %}
