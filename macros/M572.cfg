[gcode_macro M572]
description: Set pressure advance (Marlin style)
gcode:
    {% if 'D' in params %}
        {action_respond_info("M572 command received with D parameter, but extruder-specific pressure advance is not typically used in Klipper. Ignoring D and applying K to default extruder.")}
    {% endif %}
    {% if 'K' in params %}
        {% set k_factor = params.K|float %}
        SET_PRESSURE_ADVANCE ADVANCE={k_factor}
        {action_respond_info("Pressure advance (K-factor) set to " ~ k_factor ~ ".")}
    {% else %}
        {action_respond_info("M572 command received without K parameter. Please specify K value to set pressure advance.")}
    {% endif %}
