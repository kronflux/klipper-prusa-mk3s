[gcode_macro M205]
description: Set advanced motion settings (Marlin)
gcode:
  {% if 'X' in params %}
    SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.X}
    {action_respond_info("Set square corner velocity to {params.X} mm/s")}
  {% endif %}
  {% if 'Y' in params %}
    SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={params.Y}
    {action_respond_info("Set square corner velocity to {params.Y} mm/s")}
  {% endif %}
  {% if 'Z' in params %}
    SET_VELOCITY_LIMIT MAX_ACCEL_TO_DECEL={params.Z}
    {action_respond_info("Set max acceleration to deceleration to {params.Z} mm/sÂ²")}
  {% endif %}
  {% if 'E' in params %}
    # Assuming E could be used for extruder acceleration limits, which is not standard for M205
    SET_VELOCITY_LIMIT EXTRUDER_MAX_VELOCITY={params.E}
    {action_respond_info("Set extruder max velocity to {params.E} mm/s")}
  {% endif %}
  {% if 'X' not in params and 'Y' not in params and 'Z' not in params and 'E' not in params %}
    {action_respond_info("M205 command received without parameters. No changes applied.")}
  {% endif %}
