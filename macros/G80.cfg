[gcode_macro G80]
description: Start bed leveling procedure
gcode:
    M117 Starting bed leveling
    ; Define default area start and end points if slicer variables are not available
    {% set area_start_x = params.AREA_START_X|default(0.0)|float %}
    {% set area_start_y = params.AREA_START_Y|default(0.0)|float %}
    {% set area_end_x = params.AREA_END_X|default(250.0)|float %}
    {% set area_end_y = params.AREA_END_Y|default(210.0)|float %}
    BED_MESH_CALIBRATE AREA_START={area_start_x},{area_start_y} AREA_END={area_end_x},{area_end_y}
    G1 X0 Y0 Z0.4 F4000  ; Move to home position or specific post-leveling position
    M400  ; Ensure all movements are completed
    {action_respond_info("Bed leveling completed.")}
